<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FishGames Messenger Pro</title>

<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #004d4d, #002b2b);
    color: white;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

#messenger {
    width: 95vw;
    height: 90vh;
    background: #1a2e2a;
    border-radius: 16px;
    display: flex;
    overflow: hidden;
    border: 1px solid #2e8b57;
}

.sidebar {
    width: 280px;
    background: #142522;
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.contact {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px;
    border-radius: 10px;
    cursor: pointer;
}
.contact:hover { background: #243b35; }

.avatar {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    background: #22c55e;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    overflow: hidden;
}

.avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.chat {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.chat-header {
    padding: 15px;
    text-align: center;
    font-weight: bold;
    border-bottom: 1px solid #2e8b57;
    color: #4ade80;
}

.messages {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.msg {
    max-width: 70%;
    padding: 10px 14px;
    border-radius: 14px;
    font-size: 14px;
}

.me {
    align-self: flex-end;
    background: white;
    color: black;
}

.bot {
    align-self: flex-start;
    background: #2d4f47;
}

.input-bar {
    display: flex;
    gap: 10px;
    padding: 15px;
    border-top: 1px solid #2e8b57;
}

input {
    flex: 1;
    padding: 10px;
    border-radius: 10px;
    border: none;
    outline: none;
}
button {
    width: 60px;
    border-radius: 10px;
    border: none;
    background: #22c55e;
    font-weight: bold;
    cursor: pointer;
}
</style>
</head>

<body>

<div id="messenger">
    <div class="sidebar" id="contacts"></div>

    <div class="chat">
        <div class="chat-header" id="chatName">Выбери чат</div>
        <div class="messages" id="messages"></div>
        <div class="input-bar">
            <input id="msgInput" placeholder="Сообщение..." onkeydown="if(event.key==='Enter')send()">
            <button onclick="send()">➤</button>
        </div>
    </div>
</div>

<script>
const defaultAvatars = {
    "ярослав": "https://yt3.googleusercontent.com/K24r2iIAEzeJsZKXva_IQMi5HePAEU8bIqCko4KcLvLlQjArn_PszAya4xgWFlUssdEQ0OPyrQ=s900-c-k-c0x00ffffff-no-rj",
    "богдан": "https://www.meme-arsenal.com/memes/7f763e0b515cc10c21528b352319d07a.jpg",
    "тимофей": "https://i.redd.it/2z8x8zvo5wne1.png"
};

const botData = {
    "ярослав": {
        hi: ["Ну здарова.", "Ку.", "Опять ты?"],
        common: [
            "Сомнительно, но ок.",
            "Будущее всё расставит.",
            "Звучит как кринж-план.",
            "Мда… человечество устало."
        ],
        toxic: [
            "Ты сейчас серьёзно?",
            "Кринж.",
            "Это уровень комментов 2014."
        ],
        triggers: {
            "смысл жизни": "Будущего нет, но интернет пока работает."
        }
    },
    "богдан": {
        hi: ["Ку.", "Да?", "Я занят."],
        common: ["Ок.", "Погугли.", "Это не баг, это фича."],
        toxic: ["Не беси.", "Я же сказал — не пиши."],
        triggers: {
            "го в студию": "АААААААА ЗАДРАЛ СО СВОЕЙ СТУДИЕЙ"
        }
    },
    "тимофей": {
        hi: ["ГО В РОБЛОКС!", "Хай."],
        common: ["Ты просто не понял идею.", "Это эксперимент."],
        toxic: ["Сам сделай лучше.", "Лол, эксперт."],
        triggers: {
            "сомы говно": "Тебе все мои проекты не нравятся"
        }
    }
};

let current = "";
let history = JSON.parse(localStorage.getItem("history") || "{}");

function init() {
    Object.keys(botData).forEach(name => {
        if (!history[name]) history[name] = [];
        addContact(name);
    });
}
init();

function addContact(name) {
    const c = document.createElement("div");
    c.className = "contact";
    c.onclick = () => openChat(name);

    const ava = document.createElement("div");
    ava.className = "avatar";
    ava.innerHTML = `<img src="${defaultAvatars[name]}">`;

    const t = document.createElement("div");
    t.textContent = name;

    c.appendChild(ava);
    c.appendChild(t);
    document.getElementById("contacts").appendChild(c);
}

function openChat(name) {
    current = name;
    document.getElementById("chatName").textContent = name;
    const box = document.getElementById("messages");
    box.innerHTML = "";
    history[name].forEach(m => draw(m.text, m.type));
}

function draw(text, type) {
    const d = document.createElement("div");
    d.className = "msg " + type;
    d.textContent = text;
    document.getElementById("messages").appendChild(d);
    d.scrollIntoView();
}

function send() {
    const input = document.getElementById("msgInput");
    const text = input.value.trim();
    if (!text || !current) return;
    input.value = "";

    draw(text, "me");
    history[current].push({ text, type: "me" });
    save();

    setTimeout(() => reply(text), 600);
}

function reply(userText) {
    const t = userText.toLowerCase();
    const bot = botData[current];

    if (bot.triggers) {
        for (let k in bot.triggers) {
            if (t.includes(k)) return botSend(bot.triggers[k]);
        }
    }

    const toxicWords = ["хуй","блять","говно","сука","чмо","еблан"];
    if (toxicWords.some(w => t.includes(w))) return botSend(rand(bot.toxic));

    const hiWords = ["привет","ку","хай"];
    if (hiWords.some(w => t.includes(w))) return botSend(rand(bot.hi));

    botSend(rand(bot.common));
}

function botSend(text) {
    draw(text, "bot");
    history[current].push({ text, type: "bot" });
    save();
}

function rand(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
}

function save() {
    localStorage.setItem("history", JSON.stringify(history));
}
</script>

</body>
</html>
